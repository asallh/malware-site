let questions = [
    {
      question: "What does the term 'malware' stand for?",
      options: ["Malicious Software", "Mobile Software", "Malfunctioning Software", "Management Software"],
      correctAnswer: 0
    },
    {
      question: "Which of the following is NOT a common action performed by malware?",
      options: ["Displaying advertisements", "Enhancing system security", "Gathering sensitive information", "Disrupting computer system functioning"],
      correctAnswer: 1
    },
    {
      question: "Which malware is known for spreading without any user interaction?",
      options: ["Virus", "Worm", "Trojan", "Ransomware"],
      correctAnswer: 1
    },
    {
      question: "What was the purpose of the Creeper malware in the early years of computing?",
      options: ["Data theft", "Network connection experiment", "Displaying advertisements", "Erasing files"],
      correctAnswer: 1
    },
    {
      question: "What distinguishes a Trojan from other malware types?",
      options: ["Spreading without user interaction", "Hiding inside legitimate programs", "Encrypting data for ransom", "Displaying warning messages"],
      correctAnswer: 1
    },
    {
      question: "How does ransomware encrypt the target's data?",
      options: ["Using a private key", "Disabling security", "Deleting files", "Corrupting files directly"],
      correctAnswer: 0
    },
    {
      question: "Which method of malware detection scans files for suspicious behavior?",
      options: ["Signature-based detection", "Heuristic-based detection", "Behavior-based detection", "Rootkit detection"],
      correctAnswer: 2
    },
    {
      question: "What is the purpose of logic bombs in the context of malware?",
      options: ["Gathering sensitive information", "Encrypting data", "Remaining undetected", "Harming the victim under specific conditions"],
      correctAnswer: 3
    },
    {
      question: "Which stage of the Software Development Lifecycle involves rigorous testing for the final detection of bugs?",
      options: ["Planning", "Development", "Testing", "Release and Deployment"],
      correctAnswer: 2
    },
    {
      question: "What is a recommended best practice for preventing malware infections according to the provided information?",
      options: ["Using the same password for multiple accounts", "Downloading from untrustworthy sources", "Avoiding software updates", "Using a well-trusted antivirus software"],
      correctAnswer: 3
    }
  ];
  
  let timeRemaining = 60;
  let currentQuestion = 0;
  let correctAnswers = 0;
  
  function displayQuestion(index) {
    const outputDiv = document.querySelector('.output');
    if (index < questions.length) {
      let currentElement = questions[index];
      let combinedString = currentElement.question + "\n" + currentElement.options;
      typeText(combinedString + "\n", outputDiv);
    }
    else {
      endQuiz();
    }
  }
  
  function checkAnswer(answer) {
    if (answer == questions[currentQuestion].correctAnswer) {
      correctAnswers++
      typeText("Correct! Score: " + correctAnswers + "\n", document.querySelector('.output'));
    } else {
      timeRemaining -= 10;
      typeText("Incorrect! Score: " + correctAnswers + "\n", document.querySelector('.output'));
    }
    currentQuestion++;
    let timeout = setTimeout(() => { typeText("Time Remaining: " + timeRemaining + "\n", document.querySelector('.output')) }, 250);
    timeout = setTimeout(() => { displayQuestion(currentQuestion) }, 500);
  }
  
  function clearOptions() {
    const optionsDiv = document.getElementById('options');
    while (optionsDiv.firstChild) {
      optionsDiv.removeChild(optionsDiv.firstChild);
    }
  }
  
  function startQuiz() {
    // Find the input element with class 'input-command'
    var inputElement = document.querySelector('.input-command');
  
    // Check if the element exists
    if (inputElement) {
      // Replace the class name
      inputElement.className = 'input-quiz';
    } else {
      // Log an error if the element is not found
      console.error('Input element with class "input-command" not found.');
    }
    currentQuestion = 0;
    displayQuestion(currentQuestion);
    displayTime();
    const timer = setInterval(countdown, 1000);
  }
  
  function endQuiz() {
    let timeout = setTimeout(() => { typeText("Your score is: " + correctAnswers + "/4" + "\n", document.querySelector('.output')) }, 250);
    clearInterval(timer);
    // Find the input element with class 'input-command'
    var inputElement = document.querySelector('.input-quiz');
  
    // Check if the element exists
    if (inputElement) {
      // Replace the class name
      inputElement.className = 'input-command';
    } else {
      // Log an error if the element is not found
      console.error('Input element with class "input-quiz" not found.');
    }
  }
  
  document.querySelector('.input-quiz').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      e.preventDefault();
      const inputStr = this.value.trim();
      this.value = '';
      let answer = parseInt(inputStr);
      // Check if the parsed value is an integer
      if (Number.isInteger(answer)) {
        checkAnswer(answer);
      } else {
        // Handle the case where the input is not an integer
        // For example, you can display an error message or just ignore the input
        console.log("Please enter a valid integer");
      }
    }
  });
  
  function displayTime() {
    typeText("Time remaining: " + timeRemaining + "\n", document.querySelector('.output'));
  }
  
  function countdown() {
    timeRemaining--;
    if (timeRemaining <= 10 && timeRemaining > 0) {
      displayTime();
    }
    else if (timeRemaining % 5 == 0 && timeRemaining != 0) {
      displayTime();
    }
    if (timeRemaining <= 0) {
      typeText("Time's up!\n", document.querySelector('.output'));
      endQuiz();
    }
  }